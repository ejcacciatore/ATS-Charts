<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Complete ATS Market Analysis Dashboard</title>
    <script src="https://code.highcharts.com/highcharts.js"></script>
    <script src="https://code.highcharts.com/highcharts-more.js"></script>
    <script src="https://code.highcharts.com/modules/heatmap.js"></script>
    <script src="https://code.highcharts.com/modules/exporting.js"></script>
    <script src="https://code.highcharts.com/modules/export-data.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f0f2f5;
            padding: 20px;
        }
        
        .dashboard {
            max-width: 1800px;
            margin: 0 auto;
        }
        
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
            border-radius: 12px;
            margin-bottom: 30px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }
        
        h1 {
            font-size: 36px;
            margin-bottom: 15px;
        }
        
        .subtitle {
            font-size: 18px;
            opacity: 0.95;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 25px;
        }
        
        .stat-card {
            background: rgba(255,255,255,0.2);
            padding: 20px;
            border-radius: 8px;
            text-align: center;
        }
        
        .stat-number {
            font-size: 32px;
            font-weight: 700;
            display: block;
            margin-bottom: 5px;
        }
        
        .stat-label {
            font-size: 13px;
            opacity: 0.9;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .charts-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }
        
        .chart-card {
            background: white;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .chart-card.full-width {
            grid-column: 1 / -1;
        }
        
        .chart-title {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 20px;
            color: #333;
        }
        
        .chart-container {
            height: 500px;
        }
        
        .chart-container.tall {
            height: 800px;
        }
        
        .chart-container.heatmap {
            height: 1200px;
        }
        
        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            border-bottom: 2px solid #e0e0e0;
        }
        
        .tab {
            padding: 12px 24px;
            background: transparent;
            border: none;
            cursor: pointer;
            font-size: 15px;
            font-weight: 600;
            color: #666;
            border-bottom: 3px solid transparent;
            transition: all 0.3s;
        }
        
        .tab:hover {
            color: #667eea;
        }
        
        .tab.active {
            color: #667eea;
            border-bottom-color: #667eea;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        @media (max-width: 1024px) {
            .charts-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="dashboard">
        <div class="header">
            <h1>ðŸ“Š ATS Market Analysis Dashboard</h1>
            <div class="subtitle">Comprehensive venue distribution across 20 highest-volume securities</div>
            <div class="stats-grid">
                <div class="stat-card">
                    <span class="stat-number">33</span>
                    <span class="stat-label">ATS Venues</span>
                </div>
                <div class="stat-card">
                    <span class="stat-number">20</span>
                    <span class="stat-label">Top Tickers</span>
                </div>
                <div class="stat-card">
                    <span class="stat-number">594</span>
                    <span class="stat-label">Data Points</span>
                </div>
                <div class="stat-card">
                    <span class="stat-number">5.0B</span>
                    <span class="stat-label">Total Shares</span>
                </div>
            </div>
        </div>
        
        <div class="tabs">
            <button class="tab active" onclick="showTab('overview')">Overview</button>
            <button class="tab" onclick="showTab('distribution')">Distribution Analysis</button>
            <button class="tab" onclick="showTab('heatmap')">Venue-Ticker Heatmap</button>
        </div>
        
        <!-- Tab 1: Overview -->
        <div id="overview" class="tab-content active">
            <div class="charts-grid">
                <div class="chart-card">
                    <div class="chart-title">Market Share by ATS (Top 15)</div>
                    <div id="pieChart" class="chart-container"></div>
                </div>
                <div class="chart-card">
                    <div class="chart-title">Top 10 ATS by Volume</div>
                    <div id="barChart" class="chart-container"></div>
                </div>
            </div>
        </div>
        
        <!-- Tab 2: Distribution -->
        <div id="distribution" class="tab-content">
            <div class="chart-card full-width">
                <div class="chart-title">Complete Venue Distribution Across Top Tickers</div>
                <div id="stackedBarChart" class="chart-container tall"></div>
            </div>
        </div>
        
        <!-- Tab 3: Heatmap -->
        <div id="heatmap" class="tab-content">
            <div class="chart-card full-width">
                <div class="chart-title">Venue-Ticker Market Share Heatmap</div>
                <div id="heatmapChart" class="chart-container heatmap"></div>
            </div>
        </div>
    </div>
    
    <script>
        // Data
        const tickers = ["NVDA", "OPEN", "INTC", "WBD", "SPY", "NU", "NIO", "TSLA", "SNAP", "SOXS", "AAPL", "F", "PLTR", "AAL", "HYG", "PFE", "AMD", "LCID", "AMZN", "BMNR"];
        const venues = ["ALPX", "BIDS", "BLKX", "BLUE", "BNPX", "BOSS", "CGXS", "CODA", "DLTA", "EBXL", "IATS", "ICBX", "IEOS", "INCR", "ITGP", "JPBX", "JPMX", "KCGM", "LATS", "LMNX", "LQNA", "LQNT", "MLIX", "MOON", "MSPL", "MSRP", "MSTX", "ONEC", "PURE", "SGMT", "STFX", "UBSA", "XSTM"];
        const stackedSeries = [{"name": "ALPX", "data": [0.37, 0.13, 0.23, 0.21, 0.04, 0.26, 0.12, 0.1, 0.31, 0.06, 0.3, 0.15, 0.12, 0.14, 0.28, 0.31, 0.2, 0.25, 0.27, 0.05], "color": "hsl(0.0, 70%, 55%)"}, {"name": "BIDS", "data": [6.65, 3.04, 6.21, 9.27, 1.85, 10.16, 2.19, 1.65, 6.99, 10.49, 5.5, 7.51, 2.35, 7.0, 6.4, 7.81, 3.83, 5.55, 7.43, 3.95], "color": "hsl(10.909090909090908, 70%, 55%)"}, {"name": "BLKX", "data": [0.2, 0.26, 0.3, 1.09, 0.03, 0.91, 0.24, 0.06, 0.73, 0.0, 0.26, 0.39, 0.08, 0.48, 0.78, 1.39, 0.15, 0.63, 0.4, 1.63], "color": "hsl(21.818181818181817, 70%, 55%)"}, {"name": "BLUE", "data": [3.12, 1.65, 2.49, 0.11, 0.26, 0.12, 5.39, 3.79, 0.8, 6.58, 0.74, 0.12, 2.29, 0.27, 0.0, 0.15, 1.95, 1.04, 0.75, 2.34], "color": "hsl(32.72727272727273, 70%, 55%)"}, {"name": "BNPX", "data": [1.43, 0.79, 1.02, 0.95, 0.28, 0.54, 0.48, 1.44, 0.51, 0.46, 1.82, 0.74, 1.16, 0.6, 0.7, 1.31, 0.86, 0.35, 1.79, 0.96], "color": "hsl(43.63636363636363, 70%, 55%)"}, {"name": "BOSS", "data": [0.0, 0.0, 0.0, 0.0, 0.01, 0.0, 0.0, 0.01, 0.0, 0.0, 0.0, 0.0, 0.01, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], "color": "hsl(54.54545454545455, 70%, 55%)"}, {"name": "CGXS", "data": [2.43, 0.87, 2.16, 2.82, 0.51, 2.67, 2.15, 1.54, 2.5, 0.97, 3.38, 2.32, 2.29, 2.21, 3.22, 2.81, 2.6, 3.23, 3.35, 0.85], "color": "hsl(65.45454545454545, 70%, 55%)"}, {"name": "CODA", "data": [0.33, 0.57, 0.33, 0.2, 0.24, 0.08, 0.18, 0.95, 0.2, 0.47, 0.32, 0.08, 0.5, 0.14, 0.18, 0.19, 0.31, 0.2, 0.12, 0.65], "color": "hsl(76.36363636363636, 70%, 55%)"}, {"name": "DLTA", "data": [0.0, 0.0, 0.0, 0.0, 55.66, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], "color": "hsl(87.27272727272727, 70%, 55%)"}, {"name": "EBXL", "data": [6.67, 6.42, 6.39, 7.52, 3.78, 8.12, 6.15, 5.97, 6.1, 4.14, 8.43, 9.3, 5.84, 7.19, 6.16, 8.6, 6.3, 7.61, 7.63, 8.83], "color": "hsl(98.18181818181819, 70%, 55%)"}, {"name": "IATS", "data": [9.37, 16.2, 7.02, 1.11, 0.63, 1.55, 9.26, 19.25, 2.26, 14.26, 3.97, 0.46, 12.28, 1.74, 0.28, 1.38, 11.02, 5.04, 3.15, 11.13], "color": "hsl(109.0909090909091, 70%, 55%)"}, {"name": "ICBX", "data": [1.43, 1.39, 0.95, 0.82, 0.45, 0.68, 0.49, 3.33, 0.63, 0.61, 2.77, 0.48, 2.7, 0.56, 1.19, 0.83, 2.12, 0.35, 2.1, 3.05], "color": "hsl(120.0, 70%, 55%)"}, {"name": "IEOS", "data": [0.12, 0.12, 0.14, 0.01, 0.12, 0.01, 0.58, 0.13, 0.02, 0.38, 0.06, 0.0, 0.08, 0.0, 0.0, 0.01, 0.08, 0.02, 0.03, 0.11], "color": "hsl(130.9090909090909, 70%, 55%)"}, {"name": "INCR", "data": [15.44, 19.52, 17.25, 13.47, 10.6, 14.45, 15.84, 11.77, 14.51, 25.49, 15.5, 14.71, 15.61, 17.31, 20.19, 16.12, 13.92, 21.32, 15.08, 7.52], "color": "hsl(141.8181818181818, 70%, 55%)"}, {"name": "ITGP", "data": [1.99, 2.66, 1.61, 2.22, 0.38, 2.11, 0.91, 0.99, 1.29, 0.33, 1.42, 1.1, 1.24, 1.58, 2.48, 1.55, 1.19, 0.71, 1.39, 1.87], "color": "hsl(152.72727272727272, 70%, 55%)"}, {"name": "JPBX", "data": [1.54, 0.29, 1.52, 2.52, 0.51, 2.4, 0.53, 0.65, 1.52, 0.0, 2.17, 2.32, 1.22, 2.59, 0.17, 3.76, 1.5, 1.49, 1.91, 0.16], "color": "hsl(163.63636363636363, 70%, 55%)"}, {"name": "JPMX", "data": [3.24, 2.32, 2.07, 3.79, 2.42, 3.05, 2.32, 2.93, 2.64, 0.73, 4.06, 2.37, 3.53, 2.3, 2.54, 2.99, 3.22, 2.65, 3.7, 3.11], "color": "hsl(174.54545454545453, 70%, 55%)"}, {"name": "KCGM", "data": [3.04, 3.82, 2.0, 2.1, 3.17, 2.11, 1.53, 3.8, 1.76, 3.37, 2.38, 2.52, 3.16, 2.55, 3.06, 1.91, 2.61, 2.32, 2.25, 5.36], "color": "hsl(185.45454545454547, 70%, 55%)"}, {"name": "LATS", "data": [3.24, 5.29, 3.2, 3.07, 2.09, 3.01, 3.45, 3.19, 3.1, 4.65, 2.82, 2.5, 2.9, 2.6, 4.21, 2.36, 2.96, 3.17, 3.04, 3.91], "color": "hsl(196.36363636363637, 70%, 55%)"}, {"name": "LMNX", "data": [0.07, 0.0, 0.0, 0.01, 0.0, 0.02, 0.0, 0.0, 0.06, 0.0, 0.07, 0.0, 0.01, 0.0, 0.0, 0.0, 0.01, 0.0, 0.14, 0.0], "color": "hsl(207.27272727272728, 70%, 55%)"}, {"name": "LQNA", "data": [0.24, 0.0, 0.14, 0.57, 0.01, 0.27, 0.09, 0.13, 0.37, 0.0, 0.35, 0.07, 0.09, 0.03, 0.68, 0.25, 0.16, 0.02, 0.63, 0.68], "color": "hsl(218.1818181818182, 70%, 55%)"}, {"name": "LQNT", "data": [0.09, 0.0, 0.0, 0.19, 0.0, 0.06, 0.0, 0.0, 0.02, 0.0, 0.17, 0.0, 0.04, 0.0, 0.0, 0.0, 0.01, 0.0, 0.1, 0.01], "color": "hsl(229.0909090909091, 70%, 55%)"}, {"name": "MLIX", "data": [4.97, 7.41, 6.01, 4.37, 2.81, 5.11, 8.47, 4.46, 6.15, 10.4, 4.9, 8.1, 4.04, 5.66, 6.43, 5.68, 5.49, 6.92, 4.83, 5.98], "color": "hsl(240.0, 70%, 55%)"}, {"name": "MOON", "data": [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], "color": "hsl(250.9090909090909, 70%, 55%)"}, {"name": "MSPL", "data": [0.0, 6.12, 4.08, 3.29, 0.0, 6.53, 6.83, 0.0, 5.95, 2.22, 0.0, 3.85, 2.35, 4.35, 6.23, 4.04, 0.0, 6.12, 0.0, 3.02], "color": "hsl(261.8181818181818, 70%, 55%)"}, {"name": "MSRP", "data": [0.28, 0.06, 0.65, 1.16, 0.04, 0.85, 0.62, 0.11, 1.93, 0.0, 0.43, 2.11, 0.43, 0.83, 0.04, 2.18, 0.35, 1.34, 0.37, 0.04], "color": "hsl(272.72727272727275, 70%, 55%)"}, {"name": "MSTX", "data": [2.58, 0.88, 5.02, 7.07, 0.7, 6.78, 3.01, 1.21, 8.34, 0.03, 3.65, 7.46, 2.54, 6.89, 0.86, 6.28, 3.34, 3.21, 4.78, 0.2], "color": "hsl(283.6363636363636, 70%, 55%)"}, {"name": "ONEC", "data": [0.53, 1.06, 0.65, 0.88, 0.24, 0.85, 0.77, 0.78, 0.87, 0.73, 0.96, 0.53, 0.91, 0.52, 3.13, 0.47, 0.89, 1.29, 0.86, 0.45], "color": "hsl(294.54545454545456, 70%, 55%)"}, {"name": "PURE", "data": [3.68, 0.71, 3.23, 4.46, 0.55, 6.17, 3.2, 2.43, 6.09, 0.16, 6.38, 4.89, 3.57, 1.65, 3.13, 4.09, 4.45, 5.53, 5.87, 2.14], "color": "hsl(305.45454545454544, 70%, 55%)"}, {"name": "SGMT", "data": [7.71, 3.82, 6.44, 6.8, 3.42, 7.73, 6.17, 8.26, 6.18, 3.24, 7.98, 7.17, 8.27, 6.5, 12.33, 5.73, 9.09, 6.76, 8.56, 6.9], "color": "hsl(316.3636363636364, 70%, 55%)"}, {"name": "STFX", "data": [0.01, 0.0, 0.04, 0.03, 0.0, 0.07, 0.0, 0.0, 0.08, 0.0, 0.01, 0.08, 0.0, 0.01, 0.0, 0.09, 0.01, 0.02, 0.02, 0.0], "color": "hsl(327.27272727272725, 70%, 55%)"}, {"name": "UBSA", "data": [12.25, 10.6, 11.94, 10.52, 9.02, 9.9, 14.29, 15.76, 9.79, 9.97, 15.08, 8.88, 17.77, 9.2, 14.86, 9.32, 15.45, 9.72, 14.84, 15.5], "color": "hsl(338.1818181818182, 70%, 55%)"}, {"name": "XSTM", "data": [6.98, 3.98, 6.91, 9.35, 0.17, 3.44, 4.74, 5.31, 8.27, 0.28, 4.13, 9.79, 2.6, 15.07, 0.44, 8.39, 5.95, 3.13, 4.59, 9.58], "color": "hsl(349.09090909090907, 70%, 55%)"}];
        const pieData = [{"name": "INCR", "y": 15.79}, {"name": "UBSA", "y": 11.99}, {"name": "IATS", "y": 7.04}, {"name": "EBXL", "y": 6.71}, {"name": "SGMT", "y": 6.69}, {"name": "MLIX", "y": 5.85}, {"name": "BIDS", "y": 5.71}, {"name": "XSTM", "y": 5.59}, {"name": "MSTX", "y": 3.66}, {"name": "DLTA", "y": 3.56}, {"name": "PURE", "y": 3.42}, {"name": "LATS", "y": 3.31}, {"name": "MSPL", "y": 3.28}, {"name": "JPMX", "y": 2.76}, {"name": "KCGM", "y": 2.74}, {"name": "Other ATSs", "y": 11.900000000000002}];
        const heatmapData = [[0, 0, 0.37], [1, 0, 0.13], [2, 0, 0.23], [3, 0, 0.21], [4, 0, 0.04], [5, 0, 0.26], [6, 0, 0.12], [7, 0, 0.1], [8, 0, 0.31], [9, 0, 0.06], [10, 0, 0.3], [11, 0, 0.15], [12, 0, 0.12], [13, 0, 0.14], [14, 0, 0.28], [15, 0, 0.31], [16, 0, 0.2], [17, 0, 0.25], [18, 0, 0.27], [19, 0, 0.05], [0, 1, 6.65], [1, 1, 3.04], [2, 1, 6.21], [3, 1, 9.27], [4, 1, 1.85], [5, 1, 10.16], [6, 1, 2.19], [7, 1, 1.65], [8, 1, 6.99], [9, 1, 10.49], [10, 1, 5.5], [11, 1, 7.51], [12, 1, 2.35], [13, 1, 7.0], [14, 1, 6.4], [15, 1, 7.81], [16, 1, 3.83], [17, 1, 5.55], [18, 1, 7.43], [19, 1, 3.95], [0, 2, 0.2], [1, 2, 0.26], [2, 2, 0.3], [3, 2, 1.09], [4, 2, 0.03], [5, 2, 0.91], [6, 2, 0.24], [7, 2, 0.06], [8, 2, 0.73], [10, 2, 0.26], [11, 2, 0.39], [12, 2, 0.08], [13, 2, 0.48], [14, 2, 0.78], [15, 2, 1.39], [16, 2, 0.15], [17, 2, 0.63], [18, 2, 0.4], [19, 2, 1.63], [0, 3, 3.12], [1, 3, 1.65], [2, 3, 2.49], [3, 3, 0.11], [4, 3, 0.26], [5, 3, 0.12], [6, 3, 5.39], [7, 3, 3.79], [8, 3, 0.8], [9, 3, 6.58], [10, 3, 0.74], [11, 3, 0.12], [12, 3, 2.29], [13, 3, 0.27], [15, 3, 0.15], [16, 3, 1.95], [17, 3, 1.04], [18, 3, 0.75], [19, 3, 2.34], [0, 4, 1.43], [1, 4, 0.79], [2, 4, 1.02], [3, 4, 0.95], [4, 4, 0.28], [5, 4, 0.54], [6, 4, 0.48], [7, 4, 1.44], [8, 4, 0.51], [9, 4, 0.46], [10, 4, 1.82], [11, 4, 0.74], [12, 4, 1.16], [13, 4, 0.6], [14, 4, 0.7], [15, 4, 1.31], [16, 4, 0.86], [17, 4, 0.35], [18, 4, 1.79], [19, 4, 0.96], [4, 5, 0.01], [7, 5, 0.01], [12, 5, 0.01], [0, 6, 2.43], [1, 6, 0.87], [2, 6, 2.16], [3, 6, 2.82], [4, 6, 0.51], [5, 6, 2.67], [6, 6, 2.15], [7, 6, 1.54], [8, 6, 2.5], [9, 6, 0.97], [10, 6, 3.38], [11, 6, 2.32], [12, 6, 2.29], [13, 6, 2.21], [14, 6, 3.22], [15, 6, 2.81], [16, 6, 2.6], [17, 6, 3.23], [18, 6, 3.35], [19, 6, 0.85], [0, 7, 0.33], [1, 7, 0.57], [2, 7, 0.33], [3, 7, 0.2], [4, 7, 0.24], [5, 7, 0.08], [6, 7, 0.18], [7, 7, 0.95], [8, 7, 0.2], [9, 7, 0.47], [10, 7, 0.32], [11, 7, 0.08], [12, 7, 0.5], [13, 7, 0.14], [14, 7, 0.18], [15, 7, 0.19], [16, 7, 0.31], [17, 7, 0.2], [18, 7, 0.12], [19, 7, 0.65], [4, 8, 55.66], [0, 9, 6.67], [1, 9, 6.42], [2, 9, 6.39], [3, 9, 7.52], [4, 9, 3.78], [5, 9, 8.12], [6, 9, 6.15], [7, 9, 5.97], [8, 9, 6.1], [9, 9, 4.14], [10, 9, 8.43], [11, 9, 9.3], [12, 9, 5.84], [13, 9, 7.19], [14, 9, 6.16], [15, 9, 8.6], [16, 9, 6.3], [17, 9, 7.61], [18, 9, 7.63], [19, 9, 8.83], [0, 10, 9.37], [1, 10, 16.2], [2, 10, 7.02], [3, 10, 1.11], [4, 10, 0.63], [5, 10, 1.55], [6, 10, 9.26], [7, 10, 19.25], [8, 10, 2.26], [9, 10, 14.26], [10, 10, 3.97], [11, 10, 0.46], [12, 10, 12.28], [13, 10, 1.74], [14, 10, 0.28], [15, 10, 1.38], [16, 10, 11.02], [17, 10, 5.04], [18, 10, 3.15], [19, 10, 11.13], [0, 11, 1.43], [1, 11, 1.39], [2, 11, 0.95], [3, 11, 0.82], [4, 11, 0.45], [5, 11, 0.68], [6, 11, 0.49], [7, 11, 3.33], [8, 11, 0.63], [9, 11, 0.61], [10, 11, 2.77], [11, 11, 0.48], [12, 11, 2.7], [13, 11, 0.56], [14, 11, 1.19], [15, 11, 0.83], [16, 11, 2.12], [17, 11, 0.35], [18, 11, 2.1], [19, 11, 3.05], [0, 12, 0.12], [1, 12, 0.12], [2, 12, 0.14], [3, 12, 0.01], [4, 12, 0.12], [5, 12, 0.01], [6, 12, 0.58], [7, 12, 0.13], [8, 12, 0.02], [9, 12, 0.38], [10, 12, 0.06], [12, 12, 0.08], [15, 12, 0.01], [16, 12, 0.08], [17, 12, 0.02], [18, 12, 0.03], [19, 12, 0.11], [0, 13, 15.44], [1, 13, 19.52], [2, 13, 17.25], [3, 13, 13.47], [4, 13, 10.6], [5, 13, 14.45], [6, 13, 15.84], [7, 13, 11.77], [8, 13, 14.51], [9, 13, 25.49], [10, 13, 15.5], [11, 13, 14.71], [12, 13, 15.61], [13, 13, 17.31], [14, 13, 20.19], [15, 13, 16.12], [16, 13, 13.92], [17, 13, 21.32], [18, 13, 15.08], [19, 13, 7.52], [0, 14, 1.99], [1, 14, 2.66], [2, 14, 1.61], [3, 14, 2.22], [4, 14, 0.38], [5, 14, 2.11], [6, 14, 0.91], [7, 14, 0.99], [8, 14, 1.29], [9, 14, 0.33], [10, 14, 1.42], [11, 14, 1.1], [12, 14, 1.24], [13, 14, 1.58], [14, 14, 2.48], [15, 14, 1.55], [16, 14, 1.19], [17, 14, 0.71], [18, 14, 1.39], [19, 14, 1.87], [0, 15, 1.54], [1, 15, 0.29], [2, 15, 1.52], [3, 15, 2.52], [4, 15, 0.51], [5, 15, 2.4], [6, 15, 0.53], [7, 15, 0.65], [8, 15, 1.52], [10, 15, 2.17], [11, 15, 2.32], [12, 15, 1.22], [13, 15, 2.59], [14, 15, 0.17], [15, 15, 3.76], [16, 15, 1.5], [17, 15, 1.49], [18, 15, 1.91], [19, 15, 0.16], [0, 16, 3.24], [1, 16, 2.32], [2, 16, 2.07], [3, 16, 3.79], [4, 16, 2.42], [5, 16, 3.05], [6, 16, 2.32], [7, 16, 2.93], [8, 16, 2.64], [9, 16, 0.73], [10, 16, 4.06], [11, 16, 2.37], [12, 16, 3.53], [13, 16, 2.3], [14, 16, 2.54], [15, 16, 2.99], [16, 16, 3.22], [17, 16, 2.65], [18, 16, 3.7], [19, 16, 3.11], [0, 17, 3.04], [1, 17, 3.82], [2, 17, 2.0], [3, 17, 2.1], [4, 17, 3.17], [5, 17, 2.11], [6, 17, 1.53], [7, 17, 3.8], [8, 17, 1.76], [9, 17, 3.37], [10, 17, 2.38], [11, 17, 2.52], [12, 17, 3.16], [13, 17, 2.55], [14, 17, 3.06], [15, 17, 1.91], [16, 17, 2.61], [17, 17, 2.32], [18, 17, 2.25], [19, 17, 5.36], [0, 18, 3.24], [1, 18, 5.29], [2, 18, 3.2], [3, 18, 3.07], [4, 18, 2.09], [5, 18, 3.01], [6, 18, 3.45], [7, 18, 3.19], [8, 18, 3.1], [9, 18, 4.65], [10, 18, 2.82], [11, 18, 2.5], [12, 18, 2.9], [13, 18, 2.6], [14, 18, 4.21], [15, 18, 2.36], [16, 18, 2.96], [17, 18, 3.17], [18, 18, 3.04], [19, 18, 3.91], [0, 19, 0.07], [3, 19, 0.01], [5, 19, 0.02], [8, 19, 0.06], [10, 19, 0.07], [12, 19, 0.01], [16, 19, 0.01], [18, 19, 0.14], [0, 20, 0.24], [2, 20, 0.14], [3, 20, 0.57], [4, 20, 0.01], [5, 20, 0.27], [6, 20, 0.09], [7, 20, 0.13], [8, 20, 0.37], [10, 20, 0.35], [11, 20, 0.07], [12, 20, 0.09], [13, 20, 0.03], [14, 20, 0.68], [15, 20, 0.25], [16, 20, 0.16], [17, 20, 0.02], [18, 20, 0.63], [19, 20, 0.68], [0, 21, 0.09], [3, 21, 0.19], [5, 21, 0.06], [8, 21, 0.02], [10, 21, 0.17], [12, 21, 0.04], [16, 21, 0.01], [18, 21, 0.1], [19, 21, 0.01], [0, 22, 4.97], [1, 22, 7.41], [2, 22, 6.01], [3, 22, 4.37], [4, 22, 2.81], [5, 22, 5.11], [6, 22, 8.47], [7, 22, 4.46], [8, 22, 6.15], [9, 22, 10.4], [10, 22, 4.9], [11, 22, 8.1], [12, 22, 4.04], [13, 22, 5.66], [14, 22, 6.43], [15, 22, 5.68], [16, 22, 5.49], [17, 22, 6.92], [18, 22, 4.83], [19, 22, 5.98], [1, 24, 6.12], [2, 24, 4.08], [3, 24, 3.29], [5, 24, 6.53], [6, 24, 6.83], [8, 24, 5.95], [9, 24, 2.22], [11, 24, 3.85], [12, 24, 2.35], [13, 24, 4.35], [14, 24, 6.23], [15, 24, 4.04], [17, 24, 6.12], [19, 24, 3.02], [0, 25, 0.28], [1, 25, 0.06], [2, 25, 0.65], [3, 25, 1.16], [4, 25, 0.04], [5, 25, 0.85], [6, 25, 0.62], [7, 25, 0.11], [8, 25, 1.93], [10, 25, 0.43], [11, 25, 2.11], [12, 25, 0.43], [13, 25, 0.83], [14, 25, 0.04], [15, 25, 2.18], [16, 25, 0.35], [17, 25, 1.34], [18, 25, 0.37], [19, 25, 0.04], [0, 26, 2.58], [1, 26, 0.88], [2, 26, 5.02], [3, 26, 7.07], [4, 26, 0.7], [5, 26, 6.78], [6, 26, 3.01], [7, 26, 1.21], [8, 26, 8.34], [9, 26, 0.03], [10, 26, 3.65], [11, 26, 7.46], [12, 26, 2.54], [13, 26, 6.89], [14, 26, 0.86], [15, 26, 6.28], [16, 26, 3.34], [17, 26, 3.21], [18, 26, 4.78], [19, 26, 0.2], [0, 27, 0.53], [1, 27, 1.06], [2, 27, 0.65], [3, 27, 0.88], [4, 27, 0.24], [5, 27, 0.85], [6, 27, 0.77], [7, 27, 0.78], [8, 27, 0.87], [9, 27, 0.73], [10, 27, 0.96], [11, 27, 0.53], [12, 27, 0.91], [13, 27, 0.52], [14, 27, 3.13], [15, 27, 0.47], [16, 27, 0.89], [17, 27, 1.29], [18, 27, 0.86], [19, 27, 0.45], [0, 28, 3.68], [1, 28, 0.71], [2, 28, 3.23], [3, 28, 4.46], [4, 28, 0.55], [5, 28, 6.17], [6, 28, 3.2], [7, 28, 2.43], [8, 28, 6.09], [9, 28, 0.16], [10, 28, 6.38], [11, 28, 4.89], [12, 28, 3.57], [13, 28, 1.65], [14, 28, 3.13], [15, 28, 4.09], [16, 28, 4.45], [17, 28, 5.53], [18, 28, 5.87], [19, 28, 2.14], [0, 29, 7.71], [1, 29, 3.82], [2, 29, 6.44], [3, 29, 6.8], [4, 29, 3.42], [5, 29, 7.73], [6, 29, 6.17], [7, 29, 8.26], [8, 29, 6.18], [9, 29, 3.24], [10, 29, 7.98], [11, 29, 7.17], [12, 29, 8.27], [13, 29, 6.5], [14, 29, 12.33], [15, 29, 5.73], [16, 29, 9.09], [17, 29, 6.76], [18, 29, 8.56], [19, 29, 6.9], [0, 30, 0.01], [2, 30, 0.04], [3, 30, 0.03], [5, 30, 0.07], [8, 30, 0.08], [10, 30, 0.01], [11, 30, 0.08], [13, 30, 0.01], [15, 30, 0.09], [16, 30, 0.01], [17, 30, 0.02], [18, 30, 0.02], [0, 31, 12.25], [1, 31, 10.6], [2, 31, 11.94], [3, 31, 10.52], [4, 31, 9.02], [5, 31, 9.9], [6, 31, 14.29], [7, 31, 15.76], [8, 31, 9.79], [9, 31, 9.97], [10, 31, 15.08], [11, 31, 8.88], [12, 31, 17.77], [13, 31, 9.2], [14, 31, 14.86], [15, 31, 9.32], [16, 31, 15.45], [17, 31, 9.72], [18, 31, 14.84], [19, 31, 15.5], [0, 32, 6.98], [1, 32, 3.98], [2, 32, 6.91], [3, 32, 9.35], [4, 32, 0.17], [5, 32, 3.44], [6, 32, 4.74], [7, 32, 5.31], [8, 32, 8.27], [9, 32, 0.28], [10, 32, 4.13], [11, 32, 9.79], [12, 32, 2.6], [13, 32, 15.07], [14, 32, 0.44], [15, 32, 8.39], [16, 32, 5.95], [17, 32, 3.13], [18, 32, 4.59], [19, 32, 9.58]];
        const venueMarketShare = {"INCR": 15.79, "UBSA": 11.99, "IATS": 7.04, "EBXL": 6.71, "SGMT": 6.69, "MLIX": 5.85, "BIDS": 5.71, "XSTM": 5.59, "MSTX": 3.66, "DLTA": 3.56};
        
        // Tab switching
        function showTab(tabName) {
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
            
            event.target.classList.add('active');
            document.getElementById(tabName).classList.add('active');
            
            // Trigger reflow for charts
            window.dispatchEvent(new Event('resize'));
        }
        
        // Pie Chart
        Highcharts.chart('pieChart', {
            chart: { type: 'pie', backgroundColor: 'transparent' },
            title: { text: null },
            plotOptions: {
                pie: {
                    dataLabels: {
                        enabled: true,
                        format: '<b>{point.name}</b>: {point.percentage:.1f}%'
                    },
                    showInLegend: false
                }
            },
            series: [{ name: 'Market Share', data: pieData }],
            credits: { enabled: false }
        });
        
        // Top 10 Bar Chart
        const top10Data = Object.entries(venueMarketShare).map(([name, value]) => ({
            name: name,
            y: value
        }));
        
        Highcharts.chart('barChart', {
            chart: { type: 'bar', backgroundColor: 'transparent' },
            title: { text: null },
            xAxis: { type: 'category' },
            yAxis: { title: { text: 'Market Share (%)' } },
            legend: { enabled: false },
            series: [{
                name: 'Market Share',
                data: top10Data,
                colorByPoint: true
            }],
            credits: { enabled: false }
        });
        
        // Stacked Bar Chart
        Highcharts.chart('stackedBarChart', {
            chart: { type: 'bar', backgroundColor: 'transparent' },
            title: { text: null },
            xAxis: {
                categories: tickers,
                labels: { style: { fontSize: '12px' } }
            },
            yAxis: {
                min: 0,
                max: 100,
                title: { text: 'Percentage (%)' },
                labels: { format: '{value}%' }
            },
            legend: {
                align: 'right',
                verticalAlign: 'middle',
                layout: 'vertical',
                maxHeight: 700
            },
            plotOptions: {
                bar: { stacking: 'normal', borderWidth: 0 }
            },
            tooltip: {
                formatter: function() {
                    return '<b>' + this.series.name + '</b><br/>' +
                           'Ticker: ' + this.x + '<br/>' +
                           'Share: ' + this.y.toFixed(1) + '%';
                }
            },
            series: stackedSeries,
            credits: { enabled: false },
            exporting: { enabled: true }
        });
        
        // Heatmap
        Highcharts.chart('heatmapChart', {
            chart: { type: 'heatmap', backgroundColor: 'transparent' },
            title: { text: null },
            xAxis: {
                categories: tickers,
                title: { text: 'Ticker' },
                labels: { style: { fontSize: '11px' } }
            },
            yAxis: {
                categories: venues,
                title: { text: 'ATS Venue' },
                labels: { style: { fontSize: '11px' } }
            },
            colorAxis: {
                min: 0,
                minColor: '#FFFFFF',
                maxColor: '#667eea',
                stops: [
                    [0, '#FFFFFF'],
                    [0.5, '#aab4f5'],
                    [1, '#667eea']
                ]
            },
            legend: {
                align: 'right',
                layout: 'vertical',
                margin: 0,
                verticalAlign: 'middle'
            },
            tooltip: {
                formatter: function() {
                    return '<b>' + this.series.yAxis.categories[this.point.y] + '</b><br/>' +
                           'Ticker: <b>' + this.series.xAxis.categories[this.point.x] + '</b><br/>' +
                           'Share: <b>' + this.point.value.toFixed(1) + '%</b>';
                }
            },
            series: [{
                name: 'Market Share',
                borderWidth: 1,
                data: heatmapData,
                dataLabels: {
                    enabled: false
                }
            }],
            credits: { enabled: false },
            exporting: { enabled: true }
        });
    </script>
</body>
</html>
