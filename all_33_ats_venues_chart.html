<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>All 33 ATS Venues - Distribution Analysis</title>
    <script src="https://code.highcharts.com/highcharts.js"></script>
    <script src="https://code.highcharts.com/modules/exporting.js"></script>
    <script src="https://code.highcharts.com/modules/export-data.js"></script>
    <script src="https://code.highcharts.com/modules/accessibility.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1600px;
            margin: 0 auto;
            background: white;
            border-radius: 16px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }
        
        h1 {
            font-size: 36px;
            margin-bottom: 10px;
            font-weight: 700;
        }
        
        .subtitle {
            font-size: 18px;
            opacity: 0.95;
            font-weight: 300;
        }
        
        .stats {
            display: flex;
            justify-content: center;
            gap: 40px;
            margin-top: 20px;
            flex-wrap: wrap;
        }
        
        .stat {
            text-align: center;
        }
        
        .stat-number {
            font-size: 32px;
            font-weight: 700;
            display: block;
        }
        
        .stat-label {
            font-size: 14px;
            opacity: 0.9;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .content {
            padding: 40px;
        }
        
        #chart {
            width: 100%;
            height: 800px;
            margin-bottom: 30px;
        }
        
        .controls {
            display: flex;
            gap: 15px;
            margin-bottom: 30px;
            flex-wrap: wrap;
            align-items: center;
        }
        
        .control-group {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        label {
            font-weight: 600;
            color: #333;
        }
        
        input[type="text"] {
            padding: 8px 15px;
            border: 2px solid #e0e0e0;
            border-radius: 6px;
            font-size: 14px;
            width: 250px;
        }
        
        input[type="text"]:focus {
            outline: none;
            border-color: #667eea;
        }
        
        button {
            padding: 8px 20px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
        }
        
        button:hover {
            background: #5568d3;
            transform: translateY(-1px);
        }
        
        .info-box {
            background: #f8f9fa;
            border-left: 4px solid #667eea;
            padding: 20px;
            border-radius: 8px;
            margin-top: 30px;
        }
        
        .info-box h3 {
            margin-bottom: 10px;
            color: #333;
        }
        
        .info-box ul {
            list-style: none;
            padding-left: 0;
        }
        
        .info-box li {
            padding: 8px 0;
            color: #666;
        }
        
        .info-box li:before {
            content: "â†’";
            margin-right: 10px;
            color: #667eea;
            font-weight: bold;
        }
        
        @media (max-width: 768px) {
            h1 {
                font-size: 24px;
            }
            
            .subtitle {
                font-size: 14px;
            }
            
            .content {
                padding: 20px;
            }
            
            #chart {
                height: 1000px;
            }
            
            .stats {
                gap: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ðŸ“Š Complete ATS Market Landscape</h1>
            <div class="subtitle">Interactive venue distribution across top-volume securities</div>
            <div class="stats">
                <div class="stat">
                    <span class="stat-number">33</span>
                    <span class="stat-label">ATS Venues</span>
                </div>
                <div class="stat">
                    <span class="stat-number">15</span>
                    <span class="stat-label">Top Tickers</span>
                </div>
                <div class="stat">
                    <span class="stat-number">495</span>
                    <span class="stat-label">Data Points</span>
                </div>
            </div>
        </div>
        
        <div class="content">
            <div class="controls">
                <div class="control-group">
                    <label for="search">Search Venue:</label>
                    <input type="text" id="search" placeholder="Type venue name or code...">
                </div>
                <button onclick="resetChart()">Show All Venues</button>
                <button onclick="showTop10()">Show Top 10 Only</button>
            </div>
            
            <div id="chart"></div>
            
            <div class="info-box">
                <h3>ðŸ’¡ How to Use This Chart</h3>
                <ul>
                    <li><strong>Hover</strong> over bars to see detailed venue percentages</li>
                    <li><strong>Click</strong> legend items to show/hide specific venues</li>
                    <li><strong>Search</strong> for venues using the search box above</li>
                    <li><strong>Export</strong> chart as PNG, SVG, or PDF using menu (top right)</li>
                    <li><strong>Fullscreen</strong> mode available via export menu</li>
                </ul>
            </div>
        </div>
    </div>
    
    <script>
        // Data from your analysis
        const tickers = ["NVDA", "OPEN", "INTC", "WBD", "SPY", "NU", "NIO", "TSLA", "SNAP", "SOXS", "AAPL", "F", "PLTR", "AAL", "HYG"];
        const allSeriesData = [{"name": "ALPX", "data": [0.37, 0.13, 0.23, 0.21, 0.04, 0.26, 0.12, 0.1, 0.31, 0.06, 0.3, 0.15, 0.12, 0.14, 0.28], "color": "hsl(0.0, 65%, 50%)", "displayName": "AlphaX US"}, {"name": "BIDS", "data": [6.65, 3.04, 6.21, 9.27, 1.85, 10.16, 2.19, 1.65, 6.99, 10.49, 5.5, 7.51, 2.35, 7.0, 6.4], "color": "hsl(10.909090909090908, 75%, 55%)", "displayName": "BIDS ATS"}, {"name": "BLKX", "data": [0.2, 0.26, 0.3, 1.09, 0.03, 0.91, 0.24, 0.06, 0.73, 0.0, 0.26, 0.39, 0.08, 0.48, 0.78], "color": "hsl(21.818181818181817, 85%, 60%)", "displayName": "BlockCross"}, {"name": "BLUE", "data": [3.12, 1.65, 2.49, 0.11, 0.26, 0.12, 5.39, 3.79, 0.8, 6.58, 0.74, 0.12, 2.29, 0.27, 0.0], "color": "hsl(32.72727272727273, 65%, 65%)", "displayName": "Blue Ocean"}, {"name": "BNPX", "data": [1.43, 0.79, 1.02, 0.95, 0.28, 0.54, 0.48, 1.44, 0.51, 0.46, 1.82, 0.74, 1.16, 0.6, 0.7], "color": "hsl(43.63636363636363, 75%, 50%)", "displayName": "BNP Cortex"}, {"name": "BOSS", "data": [0.0, 0.0, 0.0, 0.0, 0.01, 0.0, 0.0, 0.01, 0.0, 0.0, 0.0, 0.0, 0.01, 0.0, 0.0], "color": "hsl(54.54545454545455, 85%, 55%)", "displayName": "BOSS ATS"}, {"name": "CGXS", "data": [2.43, 0.87, 2.16, 2.82, 0.51, 2.67, 2.15, 1.54, 2.5, 0.97, 3.38, 2.32, 2.29, 2.21, 3.22], "color": "hsl(65.45454545454545, 65%, 60%)", "displayName": "Cboe BYX"}, {"name": "CODA", "data": [0.33, 0.57, 0.33, 0.2, 0.24, 0.08, 0.18, 0.95, 0.2, 0.47, 0.32, 0.08, 0.5, 0.14, 0.18], "color": "hsl(76.36363636363636, 75%, 65%)", "displayName": "Coda Markets"}, {"name": "DLTA", "data": [0.0, 0.0, 0.0, 0.0, 55.66, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], "color": "hsl(87.27272727272727, 85%, 50%)", "displayName": "Delta ATS"}, {"name": "EBXL", "data": [6.67, 6.42, 6.39, 7.52, 3.78, 8.12, 6.15, 5.97, 6.1, 4.14, 8.43, 9.3, 5.84, 7.19, 6.16], "color": "hsl(98.18181818181819, 65%, 55%)", "displayName": "Level ATS"}, {"name": "IATS", "data": [9.37, 16.2, 7.02, 1.11, 0.63, 1.55, 9.26, 19.25, 2.26, 14.26, 3.97, 0.46, 12.28, 1.74, 0.28], "color": "hsl(109.0909090909091, 75%, 60%)", "displayName": "IBKR ATS"}, {"name": "ICBX", "data": [1.43, 1.39, 0.95, 0.82, 0.45, 0.68, 0.49, 3.33, 0.63, 0.61, 2.77, 0.48, 2.7, 0.56, 1.19], "color": "hsl(120.0, 85%, 65%)", "displayName": "ICBX"}, {"name": "IEOS", "data": [0.12, 0.12, 0.14, 0.01, 0.12, 0.01, 0.58, 0.13, 0.02, 0.38, 0.06, 0.0, 0.08, 0.0, 0.0], "color": "hsl(130.9090909090909, 65%, 50%)", "displayName": "IBKR EOS"}, {"name": "INCR", "data": [15.44, 19.52, 17.25, 13.47, 10.6, 14.45, 15.84, 11.77, 14.51, 25.49, 15.5, 14.71, 15.61, 17.31, 20.19], "color": "hsl(141.8181818181818, 75%, 55%)", "displayName": "IntelligentCross"}, {"name": "ITGP", "data": [1.99, 2.66, 1.61, 2.22, 0.38, 2.11, 0.91, 0.99, 1.29, 0.33, 1.42, 1.1, 1.24, 1.58, 2.48], "color": "hsl(152.72727272727272, 85%, 60%)", "displayName": "ITG Posit"}, {"name": "JPBX", "data": [1.54, 0.29, 1.52, 2.52, 0.51, 2.4, 0.53, 0.65, 1.52, 0.0, 2.17, 2.32, 1.22, 2.59, 0.17], "color": "hsl(163.63636363636363, 65%, 65%)", "displayName": "JPB-X"}, {"name": "JPMX", "data": [3.24, 2.32, 2.07, 3.79, 2.42, 3.05, 2.32, 2.93, 2.64, 0.73, 4.06, 2.37, 3.53, 2.3, 2.54], "color": "hsl(174.54545454545453, 75%, 50%)", "displayName": "JPM-X"}, {"name": "KCGM", "data": [3.04, 3.82, 2.0, 2.1, 3.17, 2.11, 1.53, 3.8, 1.76, 3.37, 2.38, 2.52, 3.16, 2.55, 3.06], "color": "hsl(185.45454545454547, 85%, 55%)", "displayName": "KCG MatchIt"}, {"name": "LATS", "data": [3.24, 5.29, 3.2, 3.07, 2.09, 3.01, 3.45, 3.19, 3.1, 4.65, 2.82, 2.5, 2.9, 2.6, 4.21], "color": "hsl(196.36363636363637, 65%, 60%)", "displayName": "Barclays ATS"}, {"name": "LMNX", "data": [0.07, 0.0, 0.0, 0.01, 0.0, 0.02, 0.0, 0.0, 0.06, 0.0, 0.07, 0.0, 0.01, 0.0, 0.0], "color": "hsl(207.27272727272728, 75%, 65%)", "displayName": "Luminex"}, {"name": "LQNA", "data": [0.24, 0.0, 0.14, 0.57, 0.01, 0.27, 0.09, 0.13, 0.37, 0.0, 0.35, 0.07, 0.09, 0.03, 0.68], "color": "hsl(218.1818181818182, 85%, 50%)", "displayName": "OneChronos"}, {"name": "LQNT", "data": [0.09, 0.0, 0.0, 0.19, 0.0, 0.06, 0.0, 0.0, 0.02, 0.0, 0.17, 0.0, 0.04, 0.0, 0.0], "color": "hsl(229.0909090909091, 65%, 55%)", "displayName": "LQNT"}, {"name": "MLIX", "data": [4.97, 7.41, 6.01, 4.37, 2.81, 5.11, 8.47, 4.46, 6.15, 10.4, 4.9, 8.1, 4.04, 5.66, 6.43], "color": "hsl(240.0, 75%, 60%)", "displayName": "Instinct X"}, {"name": "MOON", "data": [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], "color": "hsl(250.9090909090909, 85%, 65%)", "displayName": "Moon ATS"}, {"name": "MSPL", "data": [0.0, 6.12, 4.08, 3.29, 0.0, 6.53, 6.83, 0.0, 5.95, 2.22, 0.0, 3.85, 2.35, 4.35, 6.23], "color": "hsl(261.8181818181818, 65%, 50%)", "displayName": "MS Pool (ATS-4)"}, {"name": "MSRP", "data": [0.28, 0.06, 0.65, 1.16, 0.04, 0.85, 0.62, 0.11, 1.93, 0.0, 0.43, 2.11, 0.43, 0.83, 0.04], "color": "hsl(272.72727272727275, 75%, 55%)", "displayName": "MSRP"}, {"name": "MSTX", "data": [2.58, 0.88, 5.02, 7.07, 0.7, 6.78, 3.01, 1.21, 8.34, 0.03, 3.65, 7.46, 2.54, 6.89, 0.86], "color": "hsl(283.6363636363636, 85%, 60%)", "displayName": "MS Trajectory Cross (ATS-1)"}, {"name": "ONEC", "data": [0.53, 1.06, 0.65, 0.88, 0.24, 0.85, 0.77, 0.78, 0.87, 0.73, 0.96, 0.53, 0.91, 0.52, 3.13], "color": "hsl(294.54545454545456, 65%, 65%)", "displayName": "OneChronos"}, {"name": "PURE", "data": [3.68, 0.71, 3.23, 4.46, 0.55, 6.17, 3.2, 2.43, 6.09, 0.16, 6.38, 4.89, 3.57, 1.65, 3.13], "color": "hsl(305.45454545454544, 75%, 50%)", "displayName": "PureStream"}, {"name": "SGMT", "data": [7.71, 3.82, 6.44, 6.8, 3.42, 7.73, 6.17, 8.26, 6.18, 3.24, 7.98, 7.17, 8.27, 6.5, 12.33], "color": "hsl(316.3636363636364, 85%, 55%)", "displayName": "Sigma X2"}, {"name": "STFX", "data": [0.01, 0.0, 0.04, 0.03, 0.0, 0.07, 0.0, 0.0, 0.08, 0.0, 0.01, 0.08, 0.0, 0.01, 0.0], "color": "hsl(327.27272727272725, 65%, 60%)", "displayName": "Stifel X"}, {"name": "UBSA", "data": [12.25, 10.6, 11.94, 10.52, 9.02, 9.9, 14.29, 15.76, 9.79, 9.97, 15.08, 8.88, 17.77, 9.2, 14.86], "color": "hsl(338.1818181818182, 75%, 65%)", "displayName": "UBS ATS"}, {"name": "XSTM", "data": [6.98, 3.98, 6.91, 9.35, 0.17, 3.44, 4.74, 5.31, 8.27, 0.28, 4.13, 9.79, 2.6, 15.07, 0.44], "color": "hsl(349.09090909090907, 85%, 50%)", "displayName": "CrossStream"}];
        let chart;
        
        // Create the chart
        function createChart(seriesData) {
            chart = Highcharts.chart('chart', {
                chart: {
                    type: 'bar',
                    backgroundColor: 'transparent',
                    style: {
                        fontFamily: '-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif'
                    }
                },
                title: {
                    text: null
                },
                xAxis: {
                    categories: tickers,
                    title: {
                        text: 'Ticker Symbol',
                        style: {
                            fontSize: '16px',
                            fontWeight: '600'
                        }
                    },
                    labels: {
                        style: {
                            fontSize: '14px',
                            fontWeight: '500'
                        }
                    }
                },
                yAxis: {
                    min: 0,
                    max: 100,
                    title: {
                        text: 'Percentage of Ticker Volume (%)',
                        style: {
                            fontSize: '16px',
                            fontWeight: '600'
                        }
                    },
                    labels: {
                        format: '{value}%'
                    },
                    stackLabels: {
                        enabled: false
                    }
                },
                legend: {
                    align: 'right',
                    verticalAlign: 'middle',
                    layout: 'vertical',
                    itemStyle: {
                        fontSize: '12px',
                        fontWeight: '400'
                    },
                    itemHoverStyle: {
                        fontWeight: '600'
                    },
                    maxHeight: 700,
                    navigation: {
                        activeColor: '#667eea',
                        style: {
                            fontWeight: 'bold',
                            color: '#333'
                        }
                    }
                },
                tooltip: {
                    shared: false,
                    useHTML: true,
                    backgroundColor: '#333',
                    borderColor: '#333',
                    borderRadius: 8,
                    style: {
                        color: '#fff',
                        fontSize: '14px'
                    },
                    formatter: function() {
                        const displayName = this.series.userOptions.displayName || this.series.name;
                        return '<div style="padding: 5px;">' +
                               '<b style="font-size: 15px;">' + displayName + '</b><br/>' +
                               '<span style="color: #ddd;">Ticker:</span> <b>' + this.x + '</b><br/>' +
                               '<span style="color: #ddd;">Volume Share:</span> <b style="color: #4ecdc4;">' + 
                               this.y.toFixed(1) + '%</b>' +
                               '</div>';
                    }
                },
                plotOptions: {
                    bar: {
                        stacking: 'normal',
                        dataLabels: {
                            enabled: false
                        },
                        borderWidth: 0,
                        groupPadding: 0.05,
                        pointPadding: 0.02
                    },
                    series: {
                        animation: {
                            duration: 1000
                        },
                        states: {
                            hover: {
                                brightness: 0.15,
                                borderColor: '#333',
                                borderWidth: 2
                            }
                        },
                        events: {
                            legendItemClick: function() {
                                // Allow showing/hiding series
                                return true;
                            }
                        }
                    }
                },
                credits: {
                    enabled: false
                },
                exporting: {
                    enabled: true,
                    buttons: {
                        contextButton: {
                            menuItems: [
                                'viewFullscreen',
                                'separator',
                                'downloadPNG',
                                'downloadJPEG',
                                'downloadSVG',
                                'downloadPDF'
                            ],
                            theme: {
                                fill: '#667eea',
                                states: {
                                    hover: {
                                        fill: '#5568d3'
                                    }
                                }
                            }
                        }
                    }
                },
                series: seriesData,
                responsive: {
                    rules: [{
                        condition: {
                            maxWidth: 768
                        },
                        chartOptions: {
                            legend: {
                                align: 'center',
                                verticalAlign: 'bottom',
                                layout: 'horizontal',
                                maxHeight: 200
                            },
                            chart: {
                                height: 1200
                            }
                        }
                    }]
                }
            });
        }
        
        // Search functionality
        document.getElementById('search').addEventListener('input', function(e) {
            const searchTerm = e.target.value.toLowerCase();
            if (searchTerm === '') {
                createChart(allSeriesData);
                return;
            }
            
            const filteredSeries = allSeriesData.filter(series => 
                series.name.toLowerCase().includes(searchTerm) ||
                (series.displayName && series.displayName.toLowerCase().includes(searchTerm))
            );
            
            createChart(filteredSeries);
        });
        
        // Reset chart
        function resetChart() {
            document.getElementById('search').value = '';
            createChart(allSeriesData);
        }
        
        // Show top 10 venues by total volume
        function showTop10() {
            // Calculate total volume for each venue
            const venueTotals = allSeriesData.map(series => ({
                ...series,
                total: series.data.reduce((a, b) => a + b, 0)
            }));
            
            // Sort and take top 10
            venueTotals.sort((a, b) => b.total - a.total);
            const top10 = venueTotals.slice(0, 10);
            
            createChart(top10);
            document.getElementById('search').value = 'Top 10 by volume';
        }
        
        // Initialize chart
        createChart(allSeriesData);
    </script>
</body>
</html>
